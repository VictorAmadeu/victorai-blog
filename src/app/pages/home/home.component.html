<!-- ========================= HERO (texto + imagen) ========================= -->
<div class="container py-5">
  <div class="row align-items-center g-4">

    <!-- 1) Columna de texto (presentación del blog) -->
    <div class="col-12 col-lg-6">
      <!-- 1.1) Título principal del hero -->
      <h1 class="display-5 fw-bold">Victor Amadeu AI Blog</h1>

      <!-- 1.2) Párrafo introductorio: contexto general de la IA -->
      <p class="lead">
        La Inteligencia Artificial (IA) ha dejado de ser un concepto exclusivo de la ciencia ficción para convertirse en una de las tecnologías más influyentes de nuestro tiempo. Desde los asistentes virtuales que utilizamos a diario hasta los algoritmos que recomiendan películas, diagnostican enfermedades o impulsan la conducción autónoma, la IA está transformando la forma en que vivimos, trabajamos y nos relacionamos.
      </p>

      <!-- 1.3) Propósito del blog -->
      <p class="lead">
        Este blog nace con el propósito de acercar el mundo de la Inteligencia Artificial a todos los públicos, ya sean estudiantes, profesionales del sector tecnológico o personas curiosas por comprender cómo funciona esta revolución digital. Aquí encontrarás artículos explicativos, análisis de tendencias, tutoriales prácticos y reflexiones sobre los impactos sociales, éticos y económicos que acompañan a esta tecnología.
      </p>

      <!-- 1.4) Cierre del hero -->
      <p class="lead mb-3">
        El objetivo es claro: informar, inspirar y fomentar el pensamiento crítico sobre la IA, entendiendo no solo su potencial, sino también sus límites y desafíos. Porque hablar de Inteligencia Artificial no es hablar solo de máquinas, sino también del futuro de la humanidad.
      </p>

      <!-- 1.5) Botones de navegación rápida -->
      <div class="d-flex gap-2 flex-wrap">
        <!-- Hacia el listado de artículos -->
        <a class="btn btn-primary" routerLink="/articulos">Ver artículos</a>
        <!-- Hacia la página “Sobre mí” -->
        <a class="btn btn-outline-secondary" routerLink="/sobre-mi">Sobre mí</a>
      </div>
    </div>

    <!-- 2) Columna con imagen del hero -->
    <div class="col-12 col-lg-6 text-center">
      <!-- 2.1) Imagen responsiva con recorte agradable -->
      <img
        src="assets/img/hero.jpg"
        class="img-fluid rounded w-100"
        alt="Hero"
        loading="lazy"
        style="max-height:480px; object-fit:cover;">
    </div>
  </div>
</div>

<!-- ======================== ÚLTIMOS ARTÍCULOS (DINÁMICO + 1 FIJO) =================== -->
<div class="container pb-5">
  <!-- 3) Título de la sección -->
  <h2 class="h3 mb-3">Últimos Artículos</h2>

  <!-- 4) Estado de carga del bloque de posts (desde Supabase) -->
  <div *ngIf="postsLoading" class="text-muted">Cargando artículos…</div>

  <!-- 5) Estado de error si la petición a Supabase falló -->
  <div *ngIf="!postsLoading && postsError" class="alert alert-danger">
    {{ postsError }}
  </div>

  <!-- 6) Estado vacío: no hay posts disponibles -->
  <div *ngIf="!postsLoading && !postsError && latestPosts.length === 0" class="text-muted">
    Aún no hay artículos publicados.
  </div>

  <!-- 7) Grid de tarjetas:
         - Mostramos 2 posts recientes desde la BD (ngFor)
         - Añadimos SIEMPRE 1 tarjeta fija de “Ejercicios de Python” (/python) -->
  <div class="row g-4" *ngIf="!postsLoading && !postsError">

    <!-- 7.1) Iteramos posts; trackBy para rendimiento -->
    <div class="col-12 col-md-4" *ngFor="let post of latestPosts; trackBy: trackById">
      <div class="card h-100 shadow-sm">

        <!-- 7.1.a) Portada del post:
                 - usa post.cover_url si existe (desde la BD)
                 - sino, coverFor(post) devuelve un placeholder local -->
        <img
          [src]="coverFor(post)"
          class="card-img-top"
          [attr.alt]="post.title"
          loading="lazy"
          style="height:200px; object-fit:cover;">

        <div class="card-body">
          <!-- 7.1.b) Badge de categoría (si hay slug) enlazando a /categorias/:slug -->
          <a
            *ngIf="post.category_slug"
            class="badge text-bg-light text-decoration-none mb-2 d-inline-block"
            [routerLink]="['/categorias', post.category_slug]">
            {{ (post.category_slug || '').split('-').join(' ') }}
          </a>

          <!-- 7.1.c) Título del artículo -->
          <h5 class="card-title mb-1">{{ post.title }}</h5>

          <!-- 7.1.d) Fecha (si viene en el objeto) con DatePipe -->
          <p class="text-muted small mb-3" *ngIf="post.created_at">
            {{ post.created_at | date:'d MMM yyyy' }}
          </p>

          <!-- 7.1.e) Extracto del contenido para no saturar la tarjeta -->
          <p class="card-text">
            {{ (post.content || '') | slice:0:160 }}
            <span *ngIf="(post.content || '').length > 160">…</span>
          </p>

          <!-- 7.1.f) Botón “Leer más”:
                   - ahora navega a /categorias/:slug o /articulos (fallback) -->
          <a
            class="btn btn-sm btn-outline-primary stretched-link"
            [routerLink]="readMoreLink(post)"
            [attr.aria-label]="'Leer más sobre ' + post.title">
            Leer más
          </a>
        </div>
      </div>
    </div>

    <!-- 7.2) TARJETA FIJA: “Ejercicios de Python” (siempre visible) -->
    <div class="col-12 col-md-4">
      <div class="card h-100 shadow-sm">
        <!-- 7.2.a) Portada local (asegúrate de tener la imagen en assets/img) -->
        <img
          src="assets/img/python-card.jpg"
          class="card-img-top"
          alt="Ejercicios de Python"
          loading="lazy"
          style="height:200px; object-fit:cover;">
        <div class="card-body">
          <!-- 7.2.b) Etiqueta visual de categoría -->
          <span class="badge text-bg-light d-inline-block mb-2">python</span>

          <!-- 7.2.c) Título de la tarjeta -->
          <h5 class="card-title mb-1">Ejercicios de Python: guía práctica</h5>

          <!-- 7.2.d) Breve descripción -->
          <p class="text-muted small mb-3">
            Colección de ejercicios prácticos para aprender Python paso a paso.
          </p>

          <!-- 7.2.e) Botón “Leer más” que lleva DIRECTO a /python -->
          <a
            class="btn btn-sm btn-outline-primary stretched-link"
            routerLink="/python"
            aria-label="Ir a ejercicios de Python">
            Leer más
          </a>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- ============================= CHIPS DE CATEGORÍAS ======================= -->
<section class="container mt-5">
  <div class="row g-3">
    <!-- 8) Chip a categorías: IA -->
    <div class="col-12 col-md-4">
      <a class="btn btn-light w-100 py-3 shadow-sm" routerLink="/categorias">IA</a>
    </div>

    <!-- 9) Chip a categorías: Desarrollo -->
    <div class="col-12 col-md-4">
      <a class="btn btn-light w-100 py-3 shadow-sm" routerLink="/categorias">Desarrollo</a>
    </div>

    <!-- 10) Chip de Python (acceso directo a /python) -->
    <div class="col-12 col-md-4">
      <a class="btn btn-light w-100 py-3 shadow-sm" routerLink="/python">Python</a>
    </div>
  </div>
</section>

<!-- ============================== NEWSLETTER =============================== -->
<section id="boletin" class="container mt-5 p-4 p-md-5 bg-white rounded-4 shadow-sm">
  <!-- 11) Título + descripción -->
  <h3 class="h4">Suscríbete a nuestro boletín</h3>
  <p class="text-secondary">Recibe los últimos artículos hasta tu bandeja de entrada.</p>

  <!-- 12) Formulario template-driven (ngForm + ngModel).
          Requiere FormsModule importado en el componente TS. -->
  <form class="row g-3 align-items-stretch" (ngSubmit)="onSubscribe()" #newsletterForm="ngForm">
    <!-- 12.1) Campo email con two-way binding -->
    <div class="col-12 col-md-9">
      <input
        type="email"
        class="form-control form-control-lg"
        placeholder="Ingresa tu correo"
        name="email"
        [(ngModel)]="newsletterEmail"
        required
        email>
    </div>

    <!-- 12.2) Botón de envío con estado de carga -->
    <div class="col-12 col-md-3 d-grid">
      <button class="btn btn-primary btn-lg" type="submit" [disabled]="loading || !newsletterEmail">
        {{ loading ? 'Enviando…' : 'Suscribirse' }}
      </button>
    </div>
  </form>
</section>
